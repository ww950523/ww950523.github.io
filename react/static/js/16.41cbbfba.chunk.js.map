{"version":3,"sources":["scripts/components/head/index.js","scripts/views/home/index.js"],"names":["Item","Head","connect","state","goback","history","go","props","dispatch","changeTab","localStorage","oldTab","goSearch","push","isSearch","console","log","this","location","pathname","split","setState","title","show","scan","login","className","mode","icon","type","onLeftClick","rightContent","key","onClick","style","marginRight","Pop","Component","contextTypes","Proptypes","object","wrapProps","onTouchStart","e","preventDefault","myImg","src","alt","handleVisibleChange","visible","onSelect","opt","selected","value","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","buttonIndex","success","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","height","padding","display","alignItems","Home","count","getIn","data","get","word","banner","ygList","sort","kind","changeword","changeWord","url","cb","gotoSearch","getBanner","getYg","getSort","getKind","autoplay","infinite","dots","map","val","i","href","width","masterShowImg","onLoad","window","dispatchEvent","Event","s","k","y","j","a"],"mappings":"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","file":"static/js/16.41cbbfba.chunk.js","sourcesContent":["\r\nimport React, {Component} from \"react\";\r\nimport \"./index.scss\";\r\n\r\nimport {NavBar,Icon,Popover,ActionSheet,Toast} from \"antd-mobile\"\r\nimport { connect } from \"react-redux\"\r\nimport Proptypes from \"prop-types\"\r\nimport {history} from \"~\";\r\nimport { changeTab } from \"../../actions\";\r\nconst Item=Popover.Item;  //静态属性\r\n\r\n@connect(\r\n  state => (\r\n      {\r\n        \r\n      }\r\n  )\r\n)\r\n\r\n class Head extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            isSearch:false\r\n        }\r\n    }\r\n    goback=()=>{\r\n        history.go(-1);\r\n        this.props.dispatch(changeTab(localStorage.oldTab))\r\n    }\r\n    goSearch=()=>{\r\n        history.push(\"/search\")\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log(this.props.location);\r\n        var pathname=this.props.location.pathname.split(\"/\")[1];\r\n        if(pathname===\"search\"||pathname===\"login\"||pathname===\"scan\"||pathname===\"detail\"){\r\n            this.setState({\r\n                isSearch:true\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            title,\r\n            show,\r\n            scan,\r\n            login\r\n        } = this.props;\r\n        return (\r\n            <NavBar\r\n            className=\"header\"\r\n            mode=\"light\"\r\n            icon={show?<Icon type=\"left\" />:\"\"}\r\n            onLeftClick={() =>show?this.goback(): console.log('')}\r\n            rightContent={[\r\n              !this.state.isSearch&&<Icon key=\"0\" onClick={this.goSearch} type=\"search\" style={{ marginRight: '16px' }} />,\r\n              <Pop key=\"1\" scan={scan} login={login}/>,\r\n            ]}\r\n          >{title}</NavBar>\r\n      \r\n        )\r\n    }\r\n}\r\n\r\nHead.contextTypes = {\r\n    location:Proptypes.object\r\n}\r\n\r\nlet wrapProps={\r\n        onTouchStart: e => e.preventDefault(),\r\n}\r\n\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\nclass Pop extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleVisibleChange=(visible)=>{\r\n       this.setState({\r\n        visible\r\n       })\r\n    }\r\n\r\n    onSelect = (opt) => {\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n        console.log(opt);\r\n        if(opt.props.value===\"login\"){\r\n            history.push(\"/login\")\r\n        }\r\n        if(opt.props.value===\"scan\"){\r\n            history.push(\"/scan\")\r\n        }\r\n        if(opt.props.value===\"photo\"){\r\n            this.showActionSheet();\r\n        }\r\n      };\r\n\r\n      showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '相册', '直接拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: 'wuhan 1909手机拍照',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps,\r\n        },\r\n        (buttonIndex) => {\r\n         console.log(buttonIndex);\r\n         Toast.success(''+BUTTONS[buttonIndex]+ 'success !!!', 1);\r\n        });\r\n      }\r\n\r\n    render(){\r\n        const {\r\n            scan,\r\n            login,\r\n        }  = this.props;\r\n        return(\r\n              <Popover mask\r\n               className=\"header\"\r\n            overlayClassName=\"fortest\"\r\n            overlayStyle={{ color: 'currentColor' }}\r\n            visible={this.state.visible}\r\n            overlay={[\r\n              (!scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n              (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n              (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                <span style={{ marginRight: 5 }}>登录</span>\r\n              </Item>),\r\n            ]}\r\n            align={{\r\n              overflow: { adjustY: 0, adjustX: 0 },\r\n              offset: [-10, 0],\r\n            }}\r\n            onVisibleChange={this.handleVisibleChange}\r\n            onSelect={this.onSelect}\r\n          >\r\n            <div style={{\r\n              height: '100%',\r\n              padding: '0 15px',\r\n              marginRight: '-15px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n            }}\r\n            >\r\n              <Icon type=\"ellipsis\" />\r\n            </div>\r\n          </Popover>\r\n          \r\n        )\r\n    }\r\n}\r\n\r\nexport default Head","\r\n\r\nimport React, { Component } from \"react\";\r\n\r\nimport \"./index.scss\";\r\n\r\nimport  Head  from \"&/components/head\";\r\n\r\nimport {history} from \"~\";\r\n\r\nimport { Carousel } from \"antd-mobile\";\r\n\r\nimport { connect } from \"react-redux\"\r\nimport {  changeWord, getBanner, getYg, getSort, getKind } from \"../../actions\";\r\n\r\n@connect(\r\n    state => (\r\n        {\r\n            count: state.getIn([\"data\", 'num']),\r\n            data: state.get('data'),\r\n            word:state.getIn(['data','word']),\r\n            banner:state.getIn(['data','banner']),\r\n            ygList:state.getIn(['data','ygList']),\r\n            sort:state.getIn(['data','sort']),\r\n            kind:state.getIn(['data','kind']),\r\n        }\r\n    )\r\n)\r\nclass Home extends Component {\r\n    \r\n    componentDidMount() {\r\n        const {dispatch,banner,ygList,sort,kind}=this.props;\r\n        if(!banner.length>0){\r\n            dispatch(getBanner({\r\n                url:\"/react/maizuobanner\",\r\n            }))\r\n        }\r\n\r\n        if(!ygList.length>0){\r\n            dispatch(getYg({\r\n                url:\"/react/yougou\",\r\n            }))\r\n        }\r\n\r\n        if(!sort.length>0){\r\n            dispatch(getSort({\r\n                url:\"/react/sort\",\r\n            }))\r\n        }\r\n       \r\n        if(!kind.length>0){\r\n            dispatch(getKind({\r\n                url:\"/react/kind\",\r\n            }))\r\n        }\r\n       \r\n    }\r\n\r\n    changeword=()=>{\r\n        console.log('2333');\r\n        const {dispatch} =this.props;\r\n        dispatch(changeWord({\r\n            url:'/react/index',\r\n            cb(){\r\n                console.log(\"success-1909\")\r\n            }\r\n        }))\r\n    }\r\n\r\n    gotoSearch=()=>{\r\n        history.push(\"/search\")\r\n    }\r\n\r\n    render() {\r\n        console.log(this.props);\r\n        \r\n        return (\r\n            <div className=\"home\">\r\n                <Head title=\"首页\" show={true} location={this.props.location}></Head>\r\n                <Carousel\r\n                    autoplay={true}\r\n                    infinite\r\n                    dots={true}\r\n                >\r\n                    {\r\n                        this.props.banner.map((val, i) => {\r\n                            return (\r\n                                <a href=\"\"\r\n                                    key={i}\r\n                                    style={{ display: 'inline-block', width: '100%' }}\r\n                                >\r\n                                    <img\r\n                                        src={val.masterShowImg}\r\n                                        alt=\"\"\r\n                                        style={{ width: '100%',height:260}}\r\n                                        onLoad={() => {\r\n                                            window.dispatchEvent(new Event('resize'));\r\n                                        }}\r\n                                    />\r\n                                </a>\r\n                            )\r\n                        })\r\n                    }\r\n\r\n                </Carousel>\r\n                <ul className=\"himg\">\r\n                  {\r\n                      this.props.sort.map((s,k)=>{\r\n                          return(\r\n                              <li key={k}><img  src={s.url} alt=\"\"/></li>\r\n                          )\r\n                      })\r\n                  }\r\n              </ul>\r\n                    <div className=\"hsort\"><img src=\"https://i1.ygimg.cn/pics/mobile/homepage/2018/09/1537964399143.jpg\" alt=\"\"/></div>\r\n              <ul className=\"hul\">\r\n                  {\r\n                      this.props.ygList.map((y,j)=>{\r\n                          return(\r\n                              <li onClick={this.gotoSearch} key={j}><img  src={y.url} alt=\"\"/></li>\r\n                          )\r\n                      })\r\n                  }\r\n              </ul>\r\n\r\n              <ul className=\"hk\">\r\n                  {\r\n                      this.props.kind.map((k,a)=>{\r\n                          return(\r\n                              <li key={a}><img  src={k.url} alt=\"\"/></li>\r\n                          )\r\n                      })\r\n                  }\r\n              </ul>\r\n             \r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;\r\n\r\n"],"sourceRoot":""}