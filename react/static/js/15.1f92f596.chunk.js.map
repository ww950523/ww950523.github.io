{"version":3,"sources":["scripts/components/head/index.js","scripts/views/detail/index.js"],"names":["Item","Head","connect","state","goback","history","go","props","dispatch","changeTab","localStorage","oldTab","goSearch","push","isSearch","console","log","this","location","pathname","split","setState","title","show","scan","login","className","mode","icon","type","onLeftClick","rightContent","key","onClick","style","marginRight","Pop","Component","contextTypes","Proptypes","object","wrapProps","onTouchStart","e","preventDefault","myImg","src","alt","handleVisibleChange","visible","onSelect","opt","selected","value","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","buttonIndex","success","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","height","padding","display","alignItems","alert","showAlert","alertInstance","text","onPress","setTimeout","close","Detail","id","good","count","changeCount","val","buyNow","addToCar","axios","post","goodId","then","res","get","params","data","result","pic","URLSearchParams","search","slice","size","Body","width","url","name","Footer","content","extra","Header","fontSize","fontWeight","newprice","textDecoration","paddingLeft","oldprice","minWidth","showNumber","min","onChange"],"mappings":"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","file":"static/js/15.1f92f596.chunk.js","sourcesContent":["\r\nimport React, {Component} from \"react\";\r\nimport \"./index.scss\";\r\n\r\nimport {NavBar,Icon,Popover,ActionSheet,Toast} from \"antd-mobile\"\r\nimport { connect } from \"react-redux\"\r\nimport Proptypes from \"prop-types\"\r\nimport {history} from \"~\";\r\nimport { changeTab } from \"../../actions\";\r\nconst Item=Popover.Item;  //静态属性\r\n\r\n@connect(\r\n  state => (\r\n      {\r\n        \r\n      }\r\n  )\r\n)\r\n\r\n class Head extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            isSearch:false\r\n        }\r\n    }\r\n    goback=()=>{\r\n        history.go(-1);\r\n        this.props.dispatch(changeTab(localStorage.oldTab))\r\n    }\r\n    goSearch=()=>{\r\n        history.push(\"/search\")\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log(this.props.location);\r\n        var pathname=this.props.location.pathname.split(\"/\")[1];\r\n        if(pathname===\"search\"||pathname===\"login\"||pathname===\"scan\"||pathname===\"detail\"){\r\n            this.setState({\r\n                isSearch:true\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            title,\r\n            show,\r\n            scan,\r\n            login\r\n        } = this.props;\r\n        return (\r\n            <NavBar\r\n            className=\"header\"\r\n            mode=\"light\"\r\n            icon={show?<Icon type=\"left\" />:\"\"}\r\n            onLeftClick={() =>show?this.goback(): console.log('')}\r\n            rightContent={[\r\n              !this.state.isSearch&&<Icon key=\"0\" onClick={this.goSearch} type=\"search\" style={{ marginRight: '16px' }} />,\r\n              <Pop key=\"1\" scan={scan} login={login}/>,\r\n            ]}\r\n          >{title}</NavBar>\r\n      \r\n        )\r\n    }\r\n}\r\n\r\nHead.contextTypes = {\r\n    location:Proptypes.object\r\n}\r\n\r\nlet wrapProps={\r\n        onTouchStart: e => e.preventDefault(),\r\n}\r\n\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\nclass Pop extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleVisibleChange=(visible)=>{\r\n       this.setState({\r\n        visible\r\n       })\r\n    }\r\n\r\n    onSelect = (opt) => {\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n        console.log(opt);\r\n        if(opt.props.value===\"login\"){\r\n            history.push(\"/login\")\r\n        }\r\n        if(opt.props.value===\"scan\"){\r\n            history.push(\"/scan\")\r\n        }\r\n        if(opt.props.value===\"photo\"){\r\n            this.showActionSheet();\r\n        }\r\n      };\r\n\r\n      showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '相册', '直接拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: 'wuhan 1909手机拍照',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps,\r\n        },\r\n        (buttonIndex) => {\r\n         console.log(buttonIndex);\r\n         Toast.success(''+BUTTONS[buttonIndex]+ 'success !!!', 1);\r\n        });\r\n      }\r\n\r\n    render(){\r\n        const {\r\n            scan,\r\n            login,\r\n        }  = this.props;\r\n        return(\r\n              <Popover mask\r\n               className=\"header\"\r\n            overlayClassName=\"fortest\"\r\n            overlayStyle={{ color: 'currentColor' }}\r\n            visible={this.state.visible}\r\n            overlay={[\r\n              (!scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n              (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n              (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                <span style={{ marginRight: 5 }}>登录</span>\r\n              </Item>),\r\n            ]}\r\n            align={{\r\n              overflow: { adjustY: 0, adjustX: 0 },\r\n              offset: [-10, 0],\r\n            }}\r\n            onVisibleChange={this.handleVisibleChange}\r\n            onSelect={this.onSelect}\r\n          >\r\n            <div style={{\r\n              height: '100%',\r\n              padding: '0 15px',\r\n              marginRight: '-15px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n            }}\r\n            >\r\n              <Icon type=\"ellipsis\" />\r\n            </div>\r\n          </Popover>\r\n          \r\n        )\r\n    }\r\n}\r\n\r\nexport default Head","\r\n\r\nimport React, { Component } from \"react\";\r\n\r\nimport \"./index.scss\";\r\n\r\nimport { axios ,history} from \"~\";\r\n\r\nimport Head from \"&/components/head\";\r\n\r\n\r\nimport {WingBlank,WhiteSpace,Card,Stepper,Button,Modal}  from \"antd-mobile\";\r\n\r\n\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n  const alertInstance = alert('提示', '是否结算', [\r\n    { text: '再想想', onPress: () => console.log('cancel'), style: 'default' },\r\n    { text: '立即购买', onPress: () => history.push(\"/main/cart\")},\r\n  ]);\r\n  setTimeout(() => {\r\n    // 可以调用close方法以在外部close\r\n    console.log('auto close');\r\n    alertInstance.close();\r\n  }, 500000);\r\n};\r\n\r\n\r\n class Detail extends Component {\r\n\r\n\r\n    state = {\r\n        id:\"\",\r\n        good:{},\r\n        count:1\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.setState({\r\n            id:this.props.location.pathname.split(\"/detail/\")[1]\r\n        })\r\n        \r\n        axios.get(\"/react/goodOne\", {\r\n            params: {\r\n                id: this.props.location.pathname.split(\"/detail/\")[1]\r\n            }\r\n        }).then(res => {\r\n            this.setState({\r\n                good: res.data.result\r\n            })\r\n        })\r\n \r\n    }\r\n\r\n    changeCount=(val)=>{\r\n        this.setState({\r\n            count:val\r\n        })\r\n    }\r\n\r\n\r\n    buyNow=()=>{\r\n        showAlert();\r\n    }\r\n\r\n\r\n\r\n    addToCar=()=>{\r\n        axios.post(\"/react/addtoCart\",{\r\n            goodId:this.props.location.pathname.split(\"/detail/\")[1],\r\n            good:this.state.good,\r\n            count:this.state.count,\r\n        }).then(res=>{\r\n\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            location,\r\n            pic\r\n        } = this.props\r\n        const {\r\n            good\r\n        } = this.state;\r\n        return (\r\n            <div className=\"cadetailrt\">\r\n                <Head title={new URLSearchParams(location.search).get(\"name\").slice(8, 18)} show={true} location={this.props.location}></Head>\r\n                <WingBlank size=\"lg\">\r\n                    <WhiteSpace size=\"lg\" />\r\n                    <Card>\r\n                       \r\n                        <Card.Body>\r\n                            <div><img style={{ width: \"100%\", height: \"6rem\" }} src={good.url} alt=\"\" /></div>\r\n                            <p>{good.name}</p>\r\n                        </Card.Body>\r\n                        <Card.Footer content=\"点赞\" extra={<div>收藏</div>} />\r\n                        <Card.Header\r\n                            extra={<p ><span style={{color:\"red\" ,fontSize:22,fontWeight:600}}> ¥{good.newprice}</span><span style={{textDecoration: \"line-through\",paddingLeft:20,fontSize:14}}> ¥{good.oldprice}</span></p>}\r\n                        />\r\n                    </Card>\r\n                    <WhiteSpace size=\"lg\" />\r\n                    <div>\r\n                        购买数量:\r\n                    <Stepper\r\n                            style={{ width: '50%', minWidth: '100px' }}\r\n                            showNumber\r\n                            min={1}\r\n                            value={this.state.count}\r\n                            onChange={this.changeCount}\r\n                        />\r\n                    </div>\r\n                    <WhiteSpace size=\"lg\" />\r\n                    <Button type=\"warning\" onClick={this.buyNow} > 立即购买 </Button>\r\n                    <WhiteSpace size=\"lg\" />\r\n                    <Button type=\"primary\" onClick={this.addToCar}>加入购物车</Button>\r\n                </WingBlank>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Detail"],"sourceRoot":""}